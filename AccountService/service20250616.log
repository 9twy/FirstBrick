2025-06-16 10:22:07.786 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 10:22:07.864 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 10:22:07.868 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 10:22:07.869 +03:00 [INF] Hosting environment: Development
2025-06-16 10:22:07.870 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 10:22:49.653 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 10:22:49.691 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 10:22:49.785 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 10:22:49.806 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 10:22:50.035 +03:00 [WRN] user with id 0 tried to update profile of user with id 5
2025-06-16 10:22:50.039 +03:00 [INF] Executing ForbidResult with authentication schemes ([]).
2025-06-16 10:22:50.042 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-06-16 10:22:50.046 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 233.2809ms
2025-06-16 10:22:50.057 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 10:22:50.061 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 403 0 null 409.6712ms
2025-06-16 10:31:09.801 +03:00 [INF] Application is shutting down...
2025-06-16 10:31:13.483 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 10:31:13.579 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 10:31:13.582 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 10:31:13.583 +03:00 [INF] Hosting environment: Development
2025-06-16 10:31:13.584 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 10:31:20.897 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 10:31:20.927 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 10:31:21.005 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 10:31:21.024 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 10:31:25.249 +03:00 [INF] Executed DbCommand (272ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:31:25.575 +03:00 [INF] Executed DbCommand (210ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 10:31:25.841 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Email" = @p0, "FirstName" = @p1, "LastName" = @p2, "PasswordHash" = @p3, "PhoneNumber" = @p4
WHERE "Id" = @p5;
2025-06-16 10:31:25.854 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-06-16 10:31:25.867 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 4833.286ms
2025-06-16 10:31:25.875 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 10:31:25.892 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 204 null null 4995.8209ms
2025-06-16 10:32:38.575 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/ - null null
2025-06-16 10:32:38.584 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/ - 404 0 null 9.0721ms
2025-06-16 10:32:38.587 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5253/api/Users/, Response status code: 404
2025-06-16 10:32:45.479 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/5 - null null
2025-06-16 10:32:45.490 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-16 10:32:45.502 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-16 10:32:45.504 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/5 - 401 0 null 25.5949ms
2025-06-16 10:32:53.844 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/5 - null null
2025-06-16 10:32:53.849 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:32:53.854 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:32:54.098 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:32:54.112 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:32:54.131 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 275.1459ms
2025-06-16 10:32:54.133 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:32:54.135 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/5 - 200 null application/json; charset=utf-8 291.121ms
2025-06-16 10:32:58.879 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/1 - null null
2025-06-16 10:32:58.883 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:32:58.884 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:32:59.153 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:32:59.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:32:59.159 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 271.5264ms
2025-06-16 10:32:59.161 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:32:59.163 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/1 - 200 null application/json; charset=utf-8 283.9325ms
2025-06-16 10:33:03.192 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 10:33:03.197 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:33:03.198 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:33:03.402 +03:00 [INF] Executed DbCommand (200ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:33:03.406 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:33:03.407 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 206.0878ms
2025-06-16 10:33:03.408 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:33:03.409 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 200 null application/json; charset=utf-8 217.217ms
2025-06-16 10:35:47.886 +03:00 [INF] Application is shutting down...
2025-06-16 10:36:01.817 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 10:36:01.904 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 10:36:01.909 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 10:36:01.911 +03:00 [INF] Hosting environment: Development
2025-06-16 10:36:01.914 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 10:36:08.512 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 10:36:08.554 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 10:36:08.661 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:36:08.688 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:36:11.917 +03:00 [INF] Executed DbCommand (240ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:36:12.031 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:36:12.113 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 3418.5006ms
2025-06-16 10:36:12.121 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:36:12.133 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 200 null application/json; charset=utf-8 3623.8741ms
2025-06-16 10:39:26.632 +03:00 [INF] Application is shutting down...
2025-06-16 10:39:30.178 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 10:39:30.260 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 10:39:30.264 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 10:39:30.265 +03:00 [INF] Hosting environment: Development
2025-06-16 10:39:30.266 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 10:39:31.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 10:39:32.010 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 10:39:32.085 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:39:32.106 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:39:34.845 +03:00 [INF] Executed DbCommand (233ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:39:34.908 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:39:34.958 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 2842.8891ms
2025-06-16 10:39:34.966 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:39:34.975 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 200 null application/json; charset=utf-8 2997.4812ms
2025-06-16 10:40:51.138 +03:00 [INF] Application is shutting down...
2025-06-16 10:40:54.768 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 10:40:54.867 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 10:40:54.872 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 10:40:54.873 +03:00 [INF] Hosting environment: Development
2025-06-16 10:40:54.873 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 10:40:57.285 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 10:40:57.323 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 10:40:57.417 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:40:57.438 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 10:41:00.408 +03:00 [INF] Executed DbCommand (275ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 10:41:00.474 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 10:41:00.525 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 3083.4081ms
2025-06-16 10:41:00.535 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 10:41:00.546 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 200 null application/json; charset=utf-8 3262.9185ms
2025-06-16 13:16:44.597 +03:00 [INF] Application is shutting down...
2025-06-16 13:16:57.068 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 13:16:57.168 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 13:16:57.173 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 13:16:57.174 +03:00 [INF] Hosting environment: Development
2025-06-16 13:16:57.175 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 13:17:11.969 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 13:17:12.014 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 13:17:12.136 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/16/2025 9:06:07 AM', Current time (UTC): '6/16/2025 10:17:12 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-16 13:17:12.153 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/16/2025 9:06:07 AM', Current time (UTC): '6/16/2025 10:17:12 AM'.
2025-06-16 13:17:12.166 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-16 13:17:12.181 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-16 13:17:12.195 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 401 0 null 225.9405ms
2025-06-16 13:17:19.695 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 63
2025-06-16 13:17:19.709 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 13:17:19.732 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 13:17:24.159 +03:00 [INF] Executed DbCommand (266ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:17:24.188 +03:00 [INF] Executed action UsersController.login (AccountService) in 4448.8009ms
2025-06-16 13:17:24.193 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 13:17:24.196 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User not found.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 49
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:17:24.219 +03:00 [ERR] Unhandled exception occurred
System.Exception: User not found.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 49
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:17:24.287 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 500 null application/json; charset=utf-8 4593.2594ms
2025-06-16 13:17:39.194 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 63
2025-06-16 13:17:39.199 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 13:17:39.200 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 13:17:39.417 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:17:39.424 +03:00 [INF] Executed action UsersController.login (AccountService) in 221.9076ms
2025-06-16 13:17:39.427 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 13:17:39.430 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User not found.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 49
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:17:39.439 +03:00 [ERR] Unhandled exception occurred
System.Exception: User not found.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 49
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:17:39.449 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 500 null application/json; charset=utf-8 254.8192ms
2025-06-16 13:19:48.392 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 64
2025-06-16 13:19:48.405 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 13:19:48.408 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 13:19:48.668 +03:00 [INF] Executed DbCommand (206ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:19:48.772 +03:00 [INF] Executed action UsersController.login (AccountService) in 359.6165ms
2025-06-16 13:19:48.775 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 13:19:48.776 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Invalid password.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 54
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:19:48.782 +03:00 [ERR] Unhandled exception occurred
System.Exception: Invalid password.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 54
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:19:48.788 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 500 null application/json; charset=utf-8 395.9575ms
2025-06-16 13:20:11.157 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 144
2025-06-16 13:20:11.162 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:20:11.169 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 13:20:11.385 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:20:11.390 +03:00 [INF] Executed action UsersController.Register (AccountService) in 219.0716ms
2025-06-16 13:20:11.391 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:20:11.392 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 26
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:20:11.400 +03:00 [ERR] Unhandled exception occurred
System.Exception: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 26
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:20:11.407 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 500 null application/json; charset=utf-8 249.2752ms
2025-06-16 13:33:29.536 +03:00 [INF] Application is shutting down...
2025-06-16 13:33:35.755 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 13:33:35.834 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 13:33:35.838 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 13:33:35.840 +03:00 [INF] Hosting environment: Development
2025-06-16 13:33:35.841 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 13:33:41.145 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 144
2025-06-16 13:33:41.174 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 13:33:41.196 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:33:41.214 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 13:33:44.752 +03:00 [INF] Executed DbCommand (278ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:33:44.847 +03:00 [INF] Executed action UsersController.Register (AccountService) in 3623.8473ms
2025-06-16 13:33:44.857 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:33:44.865 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+NotFoundException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:33:44.909 +03:00 [ERR] Unhandled exception occurred
AccountService.Exceptions.AppException+NotFoundException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:33:44.979 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 404 null application/json; charset=utf-8 3834.3344ms
2025-06-16 13:34:14.369 +03:00 [INF] Application is shutting down...
2025-06-16 13:34:18.365 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 13:34:18.452 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 13:34:18.455 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 13:34:18.456 +03:00 [INF] Hosting environment: Development
2025-06-16 13:34:18.457 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 13:34:20.902 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 144
2025-06-16 13:34:20.926 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 13:34:20.947 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:34:20.963 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 13:34:23.712 +03:00 [INF] Executed DbCommand (219ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:34:23.765 +03:00 [INF] Executed action UsersController.Register (AccountService) in 2795.117ms
2025-06-16 13:34:23.772 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:34:23.775 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:34:23.802 +03:00 [ERR] Unhandled exception occurred
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:34:23.847 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 409 null application/json; charset=utf-8 2946.0203ms
2025-06-16 13:37:21.189 +03:00 [INF] Application is shutting down...
2025-06-16 13:37:26.302 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 13:37:26.395 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 13:37:26.398 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 13:37:26.399 +03:00 [INF] Hosting environment: Development
2025-06-16 13:37:26.400 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 13:37:29.805 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 144
2025-06-16 13:37:29.840 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 13:37:29.863 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:37:29.881 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 13:37:33.279 +03:00 [INF] Executed DbCommand (271ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 13:37:33.335 +03:00 [INF] Executed action UsersController.Register (AccountService) in 3449.8987ms
2025-06-16 13:37:33.339 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 13:37:33.343 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 13:37:33.370 +03:00 [ERR] Email is already Exists.
2025-06-16 13:37:33.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 409 null application/json; charset=utf-8 3601.6786ms
2025-06-16 15:20:39.009 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 144
2025-06-16 15:20:39.016 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:20:39.021 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 15:20:41.245 +03:00 [INF] Executed DbCommand (229ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:20:41.251 +03:00 [INF] Executed action UsersController.Register (AccountService) in 2224.4948ms
2025-06-16 15:20:41.253 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:20:41.256 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:20:41.266 +03:00 [ERR] Email is already Exists.
2025-06-16 15:20:41.268 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 409 null application/json; charset=utf-8 2258.9085ms
2025-06-16 15:20:47.052 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 142
2025-06-16 15:20:47.060 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:20:47.063 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 15:20:47.358 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:20:47.781 +03:00 [INF] Executed DbCommand (204ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "FirstName", "LastName", "PasswordHash", "PhoneNumber")
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING "Id";
2025-06-16 15:20:47.823 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'UserResponseDto'.
2025-06-16 15:20:47.865 +03:00 [INF] Executed action UsersController.Register (AccountService) in 798.7979ms
2025-06-16 15:20:47.868 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:20:47.870 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 201 null application/json; charset=utf-8 817.6493ms
2025-06-16 15:21:06.710 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/register - application/json 142
2025-06-16 15:21:06.714 +03:00 [INF] Executing endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:21:06.715 +03:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(AccountService.Dtos.RegisterUserDto) on controller UsersController (AccountService).
2025-06-16 15:21:06.918 +03:00 [INF] Executed DbCommand (200ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:21:06.929 +03:00 [INF] Executed action UsersController.Register (AccountService) in 212.5424ms
2025-06-16 15:21:06.931 +03:00 [INF] Executed endpoint 'UsersController.Register (AccountService)'
2025-06-16 15:21:06.932 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.RegisterUserAsync(RegisterUserDto registerUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 27
   at UsersController.Register(RegisterUserDto dto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:21:06.937 +03:00 [ERR] Email is already Exists.
2025-06-16 15:21:06.938 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/register - 409 null application/json; charset=utf-8 227.8832ms
2025-06-16 15:21:23.489 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 62
2025-06-16 15:21:23.501 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 15:21:23.509 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 15:21:23.717 +03:00 [INF] Executed DbCommand (198ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:21:23.803 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'LoginResponseDto'.
2025-06-16 15:21:23.808 +03:00 [INF] Executed action UsersController.login (AccountService) in 292.4641ms
2025-06-16 15:21:23.809 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 15:21:23.811 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 201 null application/json; charset=utf-8 322.39ms
2025-06-16 15:21:33.398 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 61
2025-06-16 15:21:33.410 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 15:21:33.416 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 15:21:33.629 +03:00 [INF] Executed DbCommand (209ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:21:33.699 +03:00 [INF] Executed action UsersController.login (AccountService) in 280.3684ms
2025-06-16 15:21:33.701 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 15:21:33.701 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Invalid password.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 55
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:21:33.706 +03:00 [ERR] Invalid password.
2025-06-16 15:21:33.708 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 500 null application/json; charset=utf-8 310.0231ms
2025-06-16 15:22:18.745 +03:00 [INF] Application is shutting down...
2025-06-16 15:22:26.354 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 15:22:26.443 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 15:22:26.448 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 15:22:26.450 +03:00 [INF] Hosting environment: Development
2025-06-16 15:22:26.451 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 15:22:29.408 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 61
2025-06-16 15:22:29.439 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 15:22:29.470 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 15:22:29.489 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 15:22:32.390 +03:00 [INF] Executed DbCommand (216ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:22:32.504 +03:00 [INF] Executed action UsersController.login (AccountService) in 3010.4827ms
2025-06-16 15:22:32.509 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 15:22:32.512 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+NotFoundException: Invalid password.
   at UserService.LoginUserAsync(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 59
   at UsersController.login(LoginDto loginDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:22:32.541 +03:00 [ERR] Invalid password.
2025-06-16 15:22:32.575 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 404 null application/json; charset=utf-8 3167.2878ms
2025-06-16 15:22:50.261 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5253/api/Users/login - application/json 62
2025-06-16 15:22:50.267 +03:00 [INF] Executing endpoint 'UsersController.login (AccountService)'
2025-06-16 15:22:50.268 +03:00 [INF] Route matched with {action = "login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] login(AccountService.Dtos.LoginDto) on controller UsersController (AccountService).
2025-06-16 15:22:50.487 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:22:50.569 +03:00 [INF] Executing CreatedAtRouteResult, writing value of type 'LoginResponseDto'.
2025-06-16 15:22:50.587 +03:00 [INF] Executed action UsersController.login (AccountService) in 316.758ms
2025-06-16 15:22:50.590 +03:00 [INF] Executed endpoint 'UsersController.login (AccountService)'
2025-06-16 15:22:50.591 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5253/api/Users/login - 201 null application/json; charset=utf-8 330.2522ms
2025-06-16 15:23:39.656 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/2 - null null
2025-06-16 15:23:39.700 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:39.707 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 15:23:39.970 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:23:39.975 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 265.9094ms
2025-06-16 15:23:39.975 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:39.976 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+NotFoundException: User not found.
   at UserService.GetUserByIdAsync(Int32 id) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 98
   at UsersController.getProfile(Int32 user_id) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:23:39.985 +03:00 [ERR] User not found.
2025-06-16 15:23:39.986 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/2 - 404 null application/json; charset=utf-8 329.7593ms
2025-06-16 15:23:50.691 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/5 - null null
2025-06-16 15:23:50.695 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:50.696 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 15:23:50.902 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:23:50.907 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 15:23:50.909 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 211.8186ms
2025-06-16 15:23:50.910 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:50.911 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/5 - 200 null application/json; charset=utf-8 220.1674ms
2025-06-16 15:23:54.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/4 - null null
2025-06-16 15:23:54.675 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:54.676 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 15:23:54.879 +03:00 [INF] Executed DbCommand (200ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:23:54.882 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 15:23:54.883 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 205.7964ms
2025-06-16 15:23:54.885 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:54.886 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/4 - 200 null application/json; charset=utf-8 215.3121ms
2025-06-16 15:23:57.953 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/3 - null null
2025-06-16 15:23:57.956 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:57.956 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 15:23:58.150 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:23:58.156 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 15:23:58.157 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 200.0958ms
2025-06-16 15:23:58.159 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:23:58.161 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/3 - 200 null application/json; charset=utf-8 208.1743ms
2025-06-16 15:24:00.100 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5253/api/Users/5 - null null
2025-06-16 15:24:00.105 +03:00 [INF] Executing endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:24:00.106 +03:00 [INF] Route matched with {action = "getProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] getProfile(Int32) on controller UsersController (AccountService).
2025-06-16 15:24:00.302 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:00.310 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserResponseDto'.
2025-06-16 15:24:00.312 +03:00 [INF] Executed action UsersController.getProfile (AccountService) in 204.7338ms
2025-06-16 15:24:00.313 +03:00 [INF] Executed endpoint 'UsersController.getProfile (AccountService)'
2025-06-16 15:24:00.314 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5253/api/Users/5 - 200 null application/json; charset=utf-8 214.7609ms
2025-06-16 15:24:05.970 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:24:05.975 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/16/2025 9:06:07 AM', Current time (UTC): '6/16/2025 12:24:05 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-16 15:24:05.978 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '6/16/2025 9:06:07 AM', Current time (UTC): '6/16/2025 12:24:05 PM'.
2025-06-16 15:24:05.979 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-16 15:24:05.983 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-16 15:24:05.985 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 401 0 null 14.0895ms
2025-06-16 15:24:13.190 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:24:13.194 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:13.197 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:13.401 +03:00 [INF] Executed DbCommand (197ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:13.406 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 208.3606ms
2025-06-16 15:24:13.407 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:13.408 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 127
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:13.415 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:24:13.416 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 225.3729ms
2025-06-16 15:24:24.122 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:24:24.125 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:24.125 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:24.321 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:24.528 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:24:24.532 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 405.3699ms
2025-06-16 15:24:24.533 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:24.534 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 119
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:24.540 +03:00 [ERR] Email is already Exists.
2025-06-16 15:24:24.543 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 409 null application/json; charset=utf-8 421.3494ms
2025-06-16 15:24:29.488 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/6 - application/json 119
2025-06-16 15:24:29.491 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:29.491 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:29.690 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:29.890 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:24:29.895 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 402.2353ms
2025-06-16 15:24:29.898 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:29.899 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 119
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:29.904 +03:00 [ERR] Email is already Exists.
2025-06-16 15:24:29.906 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/6 - 409 null application/json; charset=utf-8 417.3126ms
2025-06-16 15:24:32.975 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/2 - application/json 119
2025-06-16 15:24:32.978 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:32.979 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:33.181 +03:00 [INF] Executed DbCommand (198ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:33.186 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 205.7607ms
2025-06-16 15:24:33.189 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:33.191 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+NotFoundException: Invalid User Id.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 112
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:33.199 +03:00 [ERR] Invalid User Id.
2025-06-16 15:24:33.200 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/2 - 404 null application/json; charset=utf-8 224.6383ms
2025-06-16 15:24:36.249 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/1 - application/json 119
2025-06-16 15:24:36.254 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:36.255 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:36.458 +03:00 [INF] Executed DbCommand (200ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:36.461 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 204.5404ms
2025-06-16 15:24:36.462 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:36.464 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+NotFoundException: Invalid User Id.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 112
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:36.471 +03:00 [ERR] Invalid User Id.
2025-06-16 15:24:36.472 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/1 - 404 null application/json; charset=utf-8 223.4614ms
2025-06-16 15:24:38.868 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:24:38.872 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:38.873 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:39.069 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:39.073 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 198.5671ms
2025-06-16 15:24:39.074 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:39.076 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 127
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:39.081 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:24:39.082 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 213.9387ms
2025-06-16 15:24:41.997 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:24:42.001 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:42.001 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:24:42.199 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:24:42.398 +03:00 [INF] Executed DbCommand (195ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:24:42.403 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 399.8524ms
2025-06-16 15:24:42.404 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:24:42.406 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 119
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:24:42.412 +03:00 [ERR] Email is already Exists.
2025-06-16 15:24:42.413 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 409 null application/json; charset=utf-8 416.6025ms
2025-06-16 15:25:07.826 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:07.831 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:07.832 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:08.039 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:08.239 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:25:08.242 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 407.4364ms
2025-06-16 15:25:08.244 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:08.246 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 119
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:08.256 +03:00 [ERR] Email is already Exists.
2025-06-16 15:25:08.259 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 409 null application/json; charset=utf-8 432.4449ms
2025-06-16 15:25:09.232 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:09.236 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:09.239 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:09.437 +03:00 [INF] Executed DbCommand (195ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:09.637 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:25:09.641 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 400.0368ms
2025-06-16 15:25:09.642 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:09.644 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 119
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:09.653 +03:00 [ERR] Email is already Exists.
2025-06-16 15:25:09.656 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 409 null application/json; charset=utf-8 423.5015ms
2025-06-16 15:25:10.970 +03:00 [INF] Application is shutting down...
2025-06-16 15:25:15.064 +03:00 [INF] User profile is available. Using 'C:\Users\saeed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-16 15:25:15.154 +03:00 [INF] Now listening on: http://localhost:5253
2025-06-16 15:25:15.158 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-16 15:25:15.159 +03:00 [INF] Hosting environment: Development
2025-06-16 15:25:15.160 +03:00 [INF] Content root path: C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService
2025-06-16 15:25:17.596 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:17.632 +03:00 [WRN] Failed to determine the https port for redirect.
2025-06-16 15:25:17.728 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:17.746 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:20.903 +03:00 [INF] Executed DbCommand (306ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:20.965 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 3214.0289ms
2025-06-16 15:25:20.970 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:20.975 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:21.004 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:21.048 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 500 null application/json; charset=utf-8 3451.6313ms
2025-06-16 15:25:25.017 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:25:25.024 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:25.025 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:25.261 +03:00 [INF] Executed DbCommand (197ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:25.268 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 241.6338ms
2025-06-16 15:25:25.273 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:25.276 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:25.284 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:25.285 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 269.011ms
2025-06-16 15:25:26.742 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/6 - application/json 119
2025-06-16 15:25:26.747 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:26.748 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:27.030 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:27.271 +03:00 [INF] Executed DbCommand (206ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:25:27.276 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 524.5692ms
2025-06-16 15:25:27.278 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:27.279 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 124
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:27.286 +03:00 [ERR] Email is already Exists.
2025-06-16 15:25:27.287 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/6 - 409 null application/json; charset=utf-8 545.8862ms
2025-06-16 15:25:32.937 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/ - application/json 119
2025-06-16 15:25:32.942 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/ - 404 0 null 5.3318ms
2025-06-16 15:25:32.946 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PUT http://localhost:5253/api/Users/, Response status code: 404
2025-06-16 15:25:34.547 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:34.551 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:34.552 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:34.749 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:34.752 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 196.7147ms
2025-06-16 15:25:34.753 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:34.754 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:34.760 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:34.762 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 500 null application/json; charset=utf-8 214.5753ms
2025-06-16 15:25:39.368 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:39.410 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:39.412 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:39.616 +03:00 [INF] Executed DbCommand (199ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:39.623 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 208.2141ms
2025-06-16 15:25:39.626 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:39.628 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:39.636 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:39.637 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 500 null application/json; charset=utf-8 269.8895ms
2025-06-16 15:25:42.361 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:25:42.364 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:42.369 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:42.570 +03:00 [INF] Executed DbCommand (194ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:42.576 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 202.1865ms
2025-06-16 15:25:42.578 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:42.580 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:42.589 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:42.590 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 229.298ms
2025-06-16 15:25:43.768 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/ - application/json 119
2025-06-16 15:25:43.771 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/ - 404 0 null 2.5338ms
2025-06-16 15:25:43.775 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: PUT http://localhost:5253/api/Users/, Response status code: 404
2025-06-16 15:25:45.085 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:25:45.088 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:45.090 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:45.326 +03:00 [INF] Executed DbCommand (233ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:45.329 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 236.692ms
2025-06-16 15:25:45.331 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:45.333 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:45.355 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:45.358 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 273.0296ms
2025-06-16 15:25:47.693 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:47.696 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:47.698 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:47.899 +03:00 [INF] Executed DbCommand (196ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:47.902 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 201.6656ms
2025-06-16 15:25:47.908 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:47.910 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:47.921 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:47.924 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 500 null application/json; charset=utf-8 231.7216ms
2025-06-16 15:25:53.167 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/5 - application/json 119
2025-06-16 15:25:53.171 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:53.173 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:53.380 +03:00 [INF] Executed DbCommand (201ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:53.385 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 210.0355ms
2025-06-16 15:25:53.387 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:53.388 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:53.395 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:53.397 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/5 - 500 null application/json; charset=utf-8 229.7581ms
2025-06-16 15:25:54.793 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/4 - application/json 119
2025-06-16 15:25:54.798 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:54.799 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:55.009 +03:00 [INF] Executed DbCommand (200ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:55.013 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 207.0605ms
2025-06-16 15:25:55.016 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:55.019 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.UnauthorizedAccessException: You are not authorized to update this user.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 117
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:55.030 +03:00 [ERR] You are not authorized to update this user.
2025-06-16 15:25:55.032 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/4 - 500 null application/json; charset=utf-8 239.2599ms
2025-06-16 15:25:56.588 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/6 - application/json 119
2025-06-16 15:25:56.591 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:56.593 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:25:56.890 +03:00 [INF] Executed DbCommand (293ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:25:57.089 +03:00 [INF] Executed DbCommand (197ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:25:57.093 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 498.0571ms
2025-06-16 15:25:57.095 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:25:57.097 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 124
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:25:57.103 +03:00 [ERR] Email is already Exists.
2025-06-16 15:25:57.104 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/6 - 409 null application/json; charset=utf-8 516.5387ms
2025-06-16 15:26:04.617 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/6 - application/json 119
2025-06-16 15:26:04.620 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:26:04.621 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:26:04.828 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:26:05.029 +03:00 [INF] Executed DbCommand (193ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-06-16 15:26:05.036 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 413.4842ms
2025-06-16 15:26:05.038 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:26:05.040 +03:00 [ERR] An unhandled exception has occurred while executing the request.
AccountService.Exceptions.AppException+EmailAlreadyExistsException: Email is already Exists.
   at UserService.UpdateUserAsync(Int32 Id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Services\UserService.cs:line 124
   at UsersController.UpdateProfile(Int32 user_id, UpdateUserDto updateUserDto) in C:\Users\saeed\villa-capital-projects\sukuk-investment-system\services\AccountService\Controllers\UsersController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-16 15:26:05.047 +03:00 [ERR] Email is already Exists.
2025-06-16 15:26:05.049 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/6 - 409 null application/json; charset=utf-8 431.9978ms
2025-06-16 15:26:17.924 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5253/api/Users/6 - application/json 119
2025-06-16 15:26:17.929 +03:00 [INF] Executing endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:26:17.930 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(Int32, UpdateUserDto) on controller UsersController (AccountService).
2025-06-16 15:26:18.139 +03:00 [INF] Executed DbCommand (205ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Email", u."FirstName", u."LastName", u."PasswordHash", u."PhoneNumber"
FROM "Users" AS u
WHERE u."Id" = @__p_0
LIMIT 1
2025-06-16 15:26:18.492 +03:00 [INF] Executed DbCommand (272ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Email" = @p0, "FirstName" = @p1, "LastName" = @p2, "PasswordHash" = @p3, "PhoneNumber" = @p4
WHERE "Id" = @p5;
2025-06-16 15:26:18.513 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-06-16 15:26:18.516 +03:00 [INF] Executed action UsersController.UpdateProfile (AccountService) in 584.0664ms
2025-06-16 15:26:18.517 +03:00 [INF] Executed endpoint 'UsersController.UpdateProfile (AccountService)'
2025-06-16 15:26:18.518 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5253/api/Users/6 - 204 null null 593.9377ms
